{% extends "base.html" %}

{% block content %}

	<h2 align="center"> Fast-catchup </h2>


    <center>
	<audio class="player" style="width: 80%" controls>
  			<source src="{{ url_for('returnAudioFile', filepath=gptout.filepath) }}" type="audio/wav">
  			Your browser does not support the audio element.
	</audio>
    </center>

    <div class="lyrics" style="display: none">
            {{ gptout.word_boundaries }}
    </div>

    <div class="input-group">
      <h4 >
        Summary:
      </h4> <br>

      <div class="summary">
        {{ gptout.p_tags |safe}}

      </div>

    </div>

    <form action = "/generate_summary" id="summary_form" method = "post">
        <input type="checkbox" id="session_check" name="session-checkbox" value="Session-Cached" class="form-check-input">
        <label for="session-checkbox" class="form-check-label"> Get last session summary </label> <br>
        <br>
        <input type="submit" value="Generate" class="btn btn-primary btn-lg btn-block" style="width: 100%" >
    </form>

    <br><br>

    <div class="row">
      <div class="col-4">
        <div class="list-group" id="myList" role="tablist">

            {% for item in gptout.sorted_items %}
                <a class="list-group-item" id="list-{{item.id}}-list" data-toggle="list" href="#list-{{item.id}}" role="tab" aria-controls="{{item.id}}">
                    <div class="row">
                        <div class="col-8">
                            {{item.headline}}
                        </div>
                        <div class="col-2">
                            {{item.score}}
                        </div>
                    </div>
                </a>
            {% endfor %}

        </div>
      </div>
      <div class="col-8">
        <div class="tab-content" id="nav-tabContent">
          {% for item in gptout.sorted_items %}
                <div class="tab-pane fade" id="list-{{item.id}}" role="tabpanel" aria-labelledby="list-{{item.id}}-list">
                    <div class="d-flex w-100 justify-content-between">
                      <h5 class="mb-1"> {{item.subject}} </h5>
                      <small class="text-muted">{{item.date}}</small>
                    </div>
                    <p class="mb-1"> {{item.text}} </p>
                </div>
          {% endfor %}
        </div>
      </div>
    </div>

    <br>
    <br>
    <br>
    <br>


    <script>
        var triggerTabList = [].slice.call(document.querySelectorAll('#myList a'))
        triggerTabList.forEach(function (triggerEl) {
          var tabTrigger = new bootstrap.Tab(triggerEl)

          triggerEl.addEventListener('click', function (event) {
            event.preventDefault()
            tabTrigger.show()
          })
        })
    </script>

    <script src="{{url_for('.static', filename='summaryscript.js')}}"></script>

{% endblock %}
